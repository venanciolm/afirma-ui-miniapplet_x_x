<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>Sample Page</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge;chrome=1" />
<link rel="shortcut icon" type="image/png" href="/favicon.ico" />
<script type="text/javascript" src="jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="afirma-jnlp.js"></script>
<script type="text/javascript" src="test.js"></script>
<style>
#preloader {
	display: none;
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background-color: rgba(53, 147, 1, 0.7);
	z-index: 99;
	height: 100%;
}

#status {
	width: 200px;
	height: 200px;
	position: absolute;
	left: 50%;
	top: 50%;
	background-image: url(ajax-loader.gif);
	background-repeat: no-repeat;
	background-position: center;
	margin: -100px 0 0 -100px;
}
</style>
</head>
<body>
	<script type="text/javascript">
		var datos = [];
	</script>

	<select id="combo">
		<option>----</option>
		<script type="text/javascript">
			datos.push(function() {
				alert("Seleccione!")
			});
		</script>
		<option>echo</option>
		<script type="text/javascript">
			datos.push(echo);
		</script>
		<option>getBase64FromText</option>
		<script type="text/javascript">
			datos.push(getBase64FromText);
		</script>
		<option>getTextFromBase64</option>
		<script type="text/javascript">
			datos.push(getTextFromBase64);
		</script>
		<option>getFileNameContentBase64</option>
		<script type="text/javascript">
			datos.push(function() {
				var params = new Object();
				params.title = "Seleccione fichero:";
				params.extensions = "pdf,zip,odt,ini,rtf,doc,docx";
				params.description = undefined;
				params.filePath = undefined;
				var c = new AfirmaClient(pageClient);
				var scb = function(/* Anything */response, /* String */
				textStatus, /* jqXHR */
				jqXHR) {
					$("#outputText").val(response.msg);
					$("#pem").val(response.fileName);
				}
				c.setSuccessCallback(scb);
				c.getFileNameContentBase64(params);
			});
		</script>
		<option>getMultiFileNameContentBase64</option>
		<script type="text/javascript">
			datos.push(function() {
				var params = new Object();
				params.title = "Seleccione fichero:";
				params.extensions = "pdf,zip,odt,ini,rtf,doc,docx";
				params.description = undefined;
				params.filePath = undefined;
				var c = new AfirmaClient(pageClient);
				var scb = function(/* Anything */response, /* String */
				textStatus, /* jqXHR */
				jqXHR) {
					$("#outputText").val("");
					$("#pem").val("");
					for (i = 0; i < response.fileNames.length; i++) {
						$("#outputText").val(
								$("#outputText").val() + "\n>file: "
										+ response.fileNames[i]);
						$("#outputText").val(
								$("#outputText").val() + "\n"
										+ response.msgs[i]);
						$("#pem").val(
								$("#pem").val() + "\n file: "
										+ response.fileNames[i]);
					}
				}
				c.setSuccessCallback(scb);
				c.getMultiFileNameContentBase64(params);
			});
		</script>
		<option>getErrorMessage</option>
		<script type="text/javascript">
			datos.push(function() {
				var c = new AfirmaClient(pageClient);
				var scb = function(/* Anything */response, /* String */
				textStatus, /* jqXHR */jqXHR) {
					$("#outputText").val(response.msg);
					$("#pem").val("");
				}
				c.setSuccessCallback(scb);
				c.getErrorMessage();
			});
		</script>
		<option>getErrorType</option>
		<script type="text/javascript">
			datos.push(function() {
				var c = new AfirmaClient(pageClient);
				var scb = function(/* Anything */response, /* String */
				textStatus, /* jqXHR */jqXHR) {
					$("#outputText").val(response.msg);
					$("#pem").val("");
				}
				c.setSuccessCallback(scb);
				c.getErrorType();
			});
		</script>
		<option>getCurrentLog</option>
		<script type="text/javascript">
			datos.push(function() {
				var c = new AfirmaClient(pageClient);
				var scb = function(/* Anything */response, /* String */
				textStatus, /* jqXHR */jqXHR) {
					$("#outputText").val(response.msg);
					$("#pem").val("");
				}
				c.setSuccessCallback(scb);
				c.getCurrentLog();
			});
		</script>
		<option>Firmar/File</option>
		<script type="text/javascript">
			datos.push(signFile);
		</script>
		<option>Firmar/FileByName</option>
		<script type="text/javascript">
			datos.push(signFile2p);
		</script>
		<option>Firmar plano</option>
		<script type="text/javascript">
			datos.push(signMsg);
		</script>
		<option>Firmar base64</option>
		<script type="text/javascript">
			datos.push(signBase64);
		</script>
		<option></option>
		<script type="text/javascript">
			datos.push(function() {
			});
		</script>
		<option>Exit</option>
		<script type="text/javascript">
			datos.push(exit_jnlp);
		</script>
	</select>
	<input type="button" value="Ejecutar"
		onClick="
		console.log(document.getElementById('combo').selectedIndex);
		datos[document.getElementById('combo').selectedIndex]();" />&nbsp;
	<div id="resultado"></div>
	<div>
		<span>Consola</span> <br> <textarea id="console" cols="150"
				rows="10">
		 </textarea>
	</div>
	<div>
		<span>Entrada</span> <br> <textarea id="inputText" cols="150"
				rows="10"></textarea>
	</div>
	<br />
	<div>
		<span>Salida</span> <br />
		<textarea id="outputText" cols="150" rows="10"></textarea>
	</div>
	<br />
	<div>
		<span>Salida Adicional</span> <br />
		<textarea id="pem" cols="150" rows="10"></textarea>
	</div>
	<div id="preloader">
		<div id="status">&nbsp;</div>
	</div>
</body>
</html>

